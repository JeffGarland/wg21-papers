\newcommand\wgTitle{Data-Parallel Vector Types \& Operations}
\newcommand\wgName{Matthias Kretz <m.kretz@gsi.de>}
\newcommand\wgDocumentNumber{D0214R1}
\newcommand\wgGroup{LEWG / SG1}
\newcommand\wgAcknowledgements{
  This work was supported by GSI Helmholtzzentrum für Schwerionenforschung
  and the Hessian LOEWE initiative through the Helmholtz International Center
  for FAIR (HIC for FAIR).
}

\usepackage{underscore}
\usepackage{typenames}
\usepackage{mymacros}
\usepackage{wg21}

\addbibresource{extra.bib}

\newcommand\datapar[1][]{\type{datapar#1}\xspace}
\newcommand\valuetype{\type{value\_type}\xspace}
\newcommand\simdcast{\code{datapar\_cast}\xspace}
\newcommand\mask[1][]{\type{mask#1}\xspace}

\newcommand\foralli{for all $i \in [0, \code{size()}[$\xspace}

\begin{document}
\selectlanguage{american}
\begin{wgTitlepage}
  This paper describes class templates for portable data-parallel (e.g. SIMD) programming via vector types.
\end{wgTitlepage}

\pagestyle{scrheadings}
\addtocounter{section}{-1}
\section{Remarks}
\begin{itemize}
  \item This documents talks about “vector” types/objects.
    In general this will not refer to the \std\type{vector} class template.
    References to the container type will explicitly call out the \code{std} prefix to avoid confusion.
  \item In the following \VSize{T} denotes the number of scalar values (width) in a vector of type \type T (sometimes also called the number of SIMD lanes)
  \item \citep{N4184}, \citep{N4185}, and \citep{N4395} provide more information on the rationale and design decisions.
    \citep{N4454} discusses a matrix multiplication example.
    My PhD thesis \citep{Kretz2015} contains a very thorough discussion of the topic.
  \item This paper is not supposed to specify a complete API for data-parallel types and operations.
    It is meant as a starting point.
    Once the foundation is settled on the API will be completed.
\end{itemize}

\section{Changelog}
\subsection{First Revision R1}
\begin{itemize}
  \item Extended the \code{datapar_abi} tag types with a \code{fixed_size<N>} tag to handle arbitrarily sized vectors.
  \item Converted \code{memory_alignment} into a non-member trait.
  \item The load functions were converted to non-member functions.
    SG1 asked for guidance from LEWG whether a load-expression or a template parameter to load is more appropriate.
  \item The store functions were converted to non-member functions to be consistent with the load functions.
  \item Added wording to ensure that masked stores do not invoke out-of-bounds accesses for masked-off elements of the vector.
  \item Converted the return type of \datapar{}\code{::operator[]} to return a smart reference instead of an lvalue reference.
  \item Modified the wording of \code{native_handle()} to make the existence of the functions implementation-defined, instead of only the return type.
  \item Dropped the section on “\datapar logical operators”. Added a note in the discussion that the omission is deliberate.
  \item Added a minimal set of math functions on \datapar.
  \item Added initial wording for an \code{execution_policy} for parallel algorithms to use vector types.
  \item Added an example showing the use of the new execution policy.
  \item Added an example of a possible \code{execute} implementation for a vectorizing executor.
  \item Specified that masked stores do not trigger out-of-bounds stores on masked-off elements.
\end{itemize}

\input{intro}
\input{wording}
\input{discussion}
\end{document}
% vim: sw=2 sts=2 ai et tw=0
